// @bun
import{FFIType as s,JSCallback as v,toArrayBuffer as o}from"bun:ffi";import{dlopen as m,FFIType as r}from"bun:ffi";function i(t){const{symbols:e}=m(t,{initialize:{args:[],returns:r.bool},run:{args:[],returns:r.void},create_window:{args:[r.cstring,r.cstring,r.cstring,r.function],returns:r.ptr},create_element:{args:[r.ptr,r.cstring,r.cstring,r.cstring],returns:r.void},append_child:{args:[r.ptr,r.cstring,r.ptr],returns:r.void},set_attribute:{args:[r.ptr,r.cstring,r.cstring,r.cstring,r.cstring],returns:r.void},add_event_listener:{args:[r.ptr,r.cstring,r.cstring,r.cstring],returns:r.void},remove_element:{args:[r.ptr,r.cstring],returns:r.void},set_styles:{args:[r.ptr,r.cstring,r.cstring],returns:r.void}});return e}function n(t){return new Uint8Array([...new TextEncoder().encode(t),0])}self.onmessage=(t)=>{const e=i(t.data.lib_path),c=n(t.data.id),a=n(t.data.title),g=n(t.data.icon);e.initialize();const d=new v((l,u)=>{postMessage({e:"event",symbol_id:new TextDecoder().decode(new Uint8Array(o(l))).substring(0,32),iid:new TextDecoder().decode(new Uint8Array(o(u))).substring(0,32)})},{args:[s.cstring,s.cstring],returns:s.void}),p=e.create_window(a,g,c,d);postMessage({e:"ready",channel_ptr:p}),e.run(),postMessage({e:"close"})};

//# debugId=E36B74613516F74264756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3dvcmtlcnMvcnVubmVyLnRzIiwgIi4uL3NyYy9mZmkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiaW1wb3J0IHtcbiAgQ0Z1bmN0aW9uLFxuICBkbG9wZW4sXG4gIEZGSVR5cGUsXG4gIEpTQ2FsbGJhY2ssXG4gIHJlYWQsXG4gIHRvQXJyYXlCdWZmZXIsXG4gIHR5cGUgUG9pbnRlcixcbn0gZnJvbSBcImJ1bjpmZmlcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBjcmVhdGVGRkksIHRvQ1N0cmluZyB9IGZyb20gXCIuLi9mZmlcIjtcblxuZGVjbGFyZSB2YXIgc2VsZjogV29ya2VyO1xuXG5zZWxmLm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gIGNvbnN0IGNvcmUgPSBjcmVhdGVGRkkoZS5kYXRhLmxpYl9wYXRoKTtcblxuICBjb25zdCBpZCA9IHRvQ1N0cmluZyhlLmRhdGEuaWQpO1xuICBjb25zdCB0aXRsZSA9IHRvQ1N0cmluZyhlLmRhdGEudGl0bGUpO1xuICBjb25zdCBpY29uID0gdG9DU3RyaW5nKGUuZGF0YS5pY29uKTtcblxuICBjb3JlLmluaXRpYWxpemUoKTtcblxuICBjb25zdCBjYiA9IG5ldyBKU0NhbGxiYWNrKFxuICAgIChzeW1ib2xfaWQ6IFBvaW50ZXIsIGlpZDogUG9pbnRlcikgPT4ge1xuICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICBlOiBcImV2ZW50XCIsXG4gICAgICAgIHN5bWJvbF9pZDogbmV3IFRleHREZWNvZGVyKClcbiAgICAgICAgICAuZGVjb2RlKG5ldyBVaW50OEFycmF5KHRvQXJyYXlCdWZmZXIoc3ltYm9sX2lkKSkpXG4gICAgICAgICAgLnN1YnN0cmluZygwLCAzMiksXG4gICAgICAgIGlpZDogbmV3IFRleHREZWNvZGVyKClcbiAgICAgICAgICAuZGVjb2RlKG5ldyBVaW50OEFycmF5KHRvQXJyYXlCdWZmZXIoaWlkKSkpXG4gICAgICAgICAgLnN1YnN0cmluZygwLCAzMiksXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLmNzdHJpbmcsIEZGSVR5cGUuY3N0cmluZ10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IGNoYW5uZWxfcHRyID0gY29yZS5jcmVhdGVfd2luZG93KHRpdGxlLCBpY29uLCBpZCwgY2IpO1xuXG4gIHBvc3RNZXNzYWdlKHtcbiAgICBlOiBcInJlYWR5XCIsXG4gICAgY2hhbm5lbF9wdHIsXG4gIH0pO1xuXG4gIGNvcmUucnVuKCk7XG5cbiAgcG9zdE1lc3NhZ2Uoe1xuICAgIGU6IFwiY2xvc2VcIixcbiAgfSk7XG59O1xuIiwKICAgICJpbXBvcnQgeyBkbG9wZW4sIEZGSVR5cGUgfSBmcm9tIFwiYnVuOmZmaVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRkZJKHBhdGg6IHN0cmluZykge1xuICBjb25zdCB7IHN5bWJvbHMgfSA9IGRsb3BlbihwYXRoLCB7XG4gICAgaW5pdGlhbGl6ZToge1xuICAgICAgYXJnczogW10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLmJvb2wsXG4gICAgfSxcbiAgICBydW46IHtcbiAgICAgIGFyZ3M6IFtdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgY3JlYXRlX3dpbmRvdzoge1xuICAgICAgYXJnczogW1xuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmZ1bmN0aW9uLFxuICAgICAgXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUucHRyLFxuICAgIH0sXG4gICAgY3JlYXRlX2VsZW1lbnQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmcsIEZGSVR5cGUuY3N0cmluZ10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfSxcbiAgICBhcHBlbmRfY2hpbGQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLnB0cl0sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfSxcbiAgICBzZXRfYXR0cmlidXRlOiB7XG4gICAgICBhcmdzOiBbXG4gICAgICAgIEZGSVR5cGUucHRyLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICBdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgYWRkX2V2ZW50X2xpc3RlbmVyOiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgcmVtb3ZlX2VsZW1lbnQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIHNldF9zdHlsZXM6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBzeW1ib2xzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9DU3RyaW5nKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShbLi4ubmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0ciksIDBdKTtcbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxrQkFHRSxnQkFDQSxtQkFFQSxnQkNORixpQkFBUyxhQUFRLGdCQUVWLFNBQVMsQ0FBUyxDQUFDLEVBQWMsQ0FDdEMsTUFBUSxXQUFZLEVBQU8sRUFBTSxDQUMvQixXQUFZLENBQ1YsS0FBTSxDQUFDLEVBQ1AsUUFBUyxFQUFRLElBQ25CLEVBQ0EsSUFBSyxDQUNILEtBQU0sQ0FBQyxFQUNQLFFBQVMsRUFBUSxJQUNuQixFQUNBLGNBQWUsQ0FDYixLQUFNLENBQ0osRUFBUSxRQUNSLEVBQVEsUUFDUixFQUFRLFFBQ1IsRUFBUSxRQUNWLEVBQ0EsUUFBUyxFQUFRLEdBQ25CLEVBQ0EsZUFBZ0IsQ0FDZCxLQUFNLENBQUMsRUFBUSxJQUFLLEVBQVEsUUFBUyxFQUFRLFFBQVMsRUFBUSxPQUFPLEVBQ3JFLFFBQVMsRUFBUSxJQUNuQixFQUNBLGFBQWMsQ0FDWixLQUFNLENBQUMsRUFBUSxJQUFLLEVBQVEsUUFBUyxFQUFRLEdBQUcsRUFDaEQsUUFBUyxFQUFRLElBQ25CLEVBQ0EsY0FBZSxDQUNiLEtBQU0sQ0FDSixFQUFRLElBQ1IsRUFBUSxRQUNSLEVBQVEsUUFDUixFQUFRLFFBQ1IsRUFBUSxPQUNWLEVBQ0EsUUFBUyxFQUFRLElBQ25CLEVBQ0EsbUJBQW9CLENBQ2xCLEtBQU0sQ0FBQyxFQUFRLElBQUssRUFBUSxRQUFTLEVBQVEsUUFBUyxFQUFRLE9BQU8sRUFDckUsUUFBUyxFQUFRLElBQ25CLEVBQ0EsZUFBZ0IsQ0FDZCxLQUFNLENBQUMsRUFBUSxJQUFLLEVBQVEsT0FBTyxFQUNuQyxRQUFTLEVBQVEsSUFDbkIsRUFDQSxXQUFZLENBQ1YsS0FBTSxDQUFDLEVBQVEsSUFBSyxFQUFRLFFBQVMsRUFBUSxPQUFPLEVBQ3BELFFBQVMsRUFBUSxJQUNuQixDQUNGLENBQUMsRUFFRCxPQUFPLEVBR0YsU0FBUyxDQUFTLENBQUMsRUFBYSxDQUNyQyxPQUFPLElBQUksV0FBVyxDQUFDLEdBQUcsSUFBSSxZQUFZLEVBQUUsT0FBTyxDQUFHLEVBQUcsQ0FBQyxDQUFDLEVEM0M3RCxLQUFLLFVBQVksQ0FBQyxJQUFNLENBQ3RCLE1BQU0sRUFBTyxFQUFVLEVBQUUsS0FBSyxRQUFRLEVBRWhDLEVBQUssRUFBVSxFQUFFLEtBQUssRUFBRSxFQUN4QixFQUFRLEVBQVUsRUFBRSxLQUFLLEtBQUssRUFDOUIsRUFBTyxFQUFVLEVBQUUsS0FBSyxJQUFJLEVBRWxDLEVBQUssV0FBVyxFQUVoQixNQUFNLEVBQUssSUFBSSxFQUNiLENBQUMsRUFBb0IsSUFBaUIsQ0FDcEMsWUFBWSxDQUNWLEVBQUcsUUFDSCxVQUFXLElBQUksWUFBWSxFQUN4QixPQUFPLElBQUksV0FBVyxFQUFjLENBQVMsQ0FBQyxDQUFDLEVBQy9DLFVBQVUsRUFBRyxFQUFFLEVBQ2xCLElBQUssSUFBSSxZQUFZLEVBQ2xCLE9BQU8sSUFBSSxXQUFXLEVBQWMsQ0FBRyxDQUFDLENBQUMsRUFDekMsVUFBVSxFQUFHLEVBQUUsQ0FDcEIsQ0FBQyxHQUVILENBQ0UsS0FBTSxDQUFDLEVBQVEsUUFBUyxFQUFRLE9BQU8sRUFDdkMsUUFBUyxFQUFRLElBQ25CLENBQ0YsRUFFTSxFQUFjLEVBQUssY0FBYyxFQUFPLEVBQU0sRUFBSSxDQUFFLEVBRTFELFlBQVksQ0FDVixFQUFHLFFBQ0gsYUFDRixDQUFDLEVBRUQsRUFBSyxJQUFJLEVBRVQsWUFBWSxDQUNWLEVBQUcsT0FDTCxDQUFDIiwKICAiZGVidWdJZCI6ICJFMzZCNzQ2MTM1MTZGNzQyNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
