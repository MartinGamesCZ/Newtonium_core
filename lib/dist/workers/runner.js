// @bun
import{FFIType as o,JSCallback as w,toArrayBuffer as a}from"bun:ffi";import{dlopen as v,FFIType as r}from"bun:ffi";function c(t){const{symbols:e}=v(t,{initialize:{args:[],returns:r.bool},run:{args:[],returns:r.void},create_window:{args:[r.cstring,r.cstring,r.cstring,r.function],returns:r.ptr},create_element:{args:[r.ptr,r.cstring,r.cstring,r.cstring],returns:r.void},append_child:{args:[r.ptr,r.cstring,r.ptr],returns:r.void},set_attribute:{args:[r.ptr,r.cstring,r.cstring,r.cstring,r.cstring],returns:r.void},add_event_listener:{args:[r.ptr,r.cstring,r.cstring,r.cstring],returns:r.void},remove_element:{args:[r.ptr,r.cstring],returns:r.void},set_styles:{args:[r.ptr,r.cstring,r.cstring],returns:r.void},get_attribute:{args:[r.ptr,r.cstring,r.cstring,r.cstring,r.cstring],returns:r.cstring},insert_before:{args:[r.ptr,r.cstring,r.cstring,r.cstring],returns:r.void}});return e}function n(t){return new Uint8Array([...new TextEncoder().encode(t),0])}import{workerData as g}from"worker_threads";self.onmessage=(t)=>{const e=c(t.data.lib_path),d=n(t.data.id),p=n(t.data.title),l=n(t.data.icon);e.initialize();const u=new w((_,f)=>{let s=new TextDecoder().decode(new Uint8Array(a(f))),i=new TextDecoder().decode(new Uint8Array(a(_))).substring(0,32);if(i.startsWith("!!")){g.port.postMessage(s.split("!!").slice(1).join("!!").split(";~;")[0]);const y=new Int32Array(g.shared);Atomics.notify(y,0);return}postMessage({e:"event",symbol_id:i,iid:i.startsWith("!!")?s:s.substring(0,32)})},{args:[o.cstring,o.cstring],returns:o.void}),m=e.create_window(p,l,d,u);postMessage({e:"ready",channel_ptr:m}),e.run(),postMessage({e:"close"})};

//# debugId=60C98D7110B71DE864756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3dvcmtlcnMvcnVubmVyLnRzIiwgIi4uL3NyYy9mZmkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiaW1wb3J0IHtcbiAgQ0Z1bmN0aW9uLFxuICBkbG9wZW4sXG4gIEZGSVR5cGUsXG4gIEpTQ2FsbGJhY2ssXG4gIHJlYWQsXG4gIHRvQXJyYXlCdWZmZXIsXG4gIHR5cGUgUG9pbnRlcixcbn0gZnJvbSBcImJ1bjpmZmlcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBjcmVhdGVGRkksIHRvQ1N0cmluZyB9IGZyb20gXCIuLi9mZmlcIjtcbmltcG9ydCB7IHdvcmtlckRhdGEgfSBmcm9tIFwid29ya2VyX3RocmVhZHNcIjtcblxuZGVjbGFyZSB2YXIgc2VsZjogV29ya2VyO1xuXG5zZWxmLm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gIGNvbnN0IGNvcmUgPSBjcmVhdGVGRkkoZS5kYXRhLmxpYl9wYXRoKTtcblxuICBjb25zdCBpZCA9IHRvQ1N0cmluZyhlLmRhdGEuaWQpO1xuICBjb25zdCB0aXRsZSA9IHRvQ1N0cmluZyhlLmRhdGEudGl0bGUpO1xuICBjb25zdCBpY29uID0gdG9DU3RyaW5nKGUuZGF0YS5pY29uKTtcblxuICBjb3JlLmluaXRpYWxpemUoKTtcblxuICBjb25zdCBjYiA9IG5ldyBKU0NhbGxiYWNrKFxuICAgIChzeW1ib2xfaWQ6IFBvaW50ZXIsIGlpZDogUG9pbnRlcikgPT4ge1xuICAgICAgbGV0IGRlY19paWQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoXG4gICAgICAgIG5ldyBVaW50OEFycmF5KHRvQXJyYXlCdWZmZXIoaWlkKSlcbiAgICAgICk7XG4gICAgICBsZXQgc3ltYl9pZCA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgICAgIC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkodG9BcnJheUJ1ZmZlcihzeW1ib2xfaWQpKSlcbiAgICAgICAgLnN1YnN0cmluZygwLCAzMik7XG5cbiAgICAgIGlmIChzeW1iX2lkLnN0YXJ0c1dpdGgoXCIhIVwiKSkge1xuICAgICAgICB3b3JrZXJEYXRhLnBvcnQucG9zdE1lc3NhZ2UoXG4gICAgICAgICAgZGVjX2lpZC5zcGxpdChcIiEhXCIpLnNsaWNlKDEpLmpvaW4oXCIhIVwiKS5zcGxpdChcIjt+O1wiKVswXVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGkzMiA9IG5ldyBJbnQzMkFycmF5KHdvcmtlckRhdGEuc2hhcmVkKTtcbiAgICAgICAgQXRvbWljcy5ub3RpZnkoaTMyLCAwKTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHBvc3RNZXNzYWdlKHtcbiAgICAgICAgZTogXCJldmVudFwiLFxuICAgICAgICBzeW1ib2xfaWQ6IHN5bWJfaWQsXG4gICAgICAgIGlpZDogc3ltYl9pZC5zdGFydHNXaXRoKFwiISFcIikgPyBkZWNfaWlkIDogZGVjX2lpZC5zdWJzdHJpbmcoMCwgMzIpLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH1cbiAgKTtcblxuICBjb25zdCBjaGFubmVsX3B0ciA9IGNvcmUuY3JlYXRlX3dpbmRvdyh0aXRsZSwgaWNvbiwgaWQsIGNiKTtcblxuICBwb3N0TWVzc2FnZSh7XG4gICAgZTogXCJyZWFkeVwiLFxuICAgIGNoYW5uZWxfcHRyLFxuICB9KTtcblxuICBjb3JlLnJ1bigpO1xuXG4gIHBvc3RNZXNzYWdlKHtcbiAgICBlOiBcImNsb3NlXCIsXG4gIH0pO1xufTtcbiIsCiAgICAiaW1wb3J0IHsgZGxvcGVuLCBGRklUeXBlIH0gZnJvbSBcImJ1bjpmZmlcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZGSShwYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgeyBzeW1ib2xzIH0gPSBkbG9wZW4ocGF0aCwge1xuICAgIGluaXRpYWxpemU6IHtcbiAgICAgIGFyZ3M6IFtdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS5ib29sLFxuICAgIH0sXG4gICAgcnVuOiB7XG4gICAgICBhcmdzOiBbXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIGNyZWF0ZV93aW5kb3c6IHtcbiAgICAgIGFyZ3M6IFtcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5mdW5jdGlvbixcbiAgICAgIF0sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnB0cixcbiAgICB9LFxuICAgIGNyZWF0ZV9lbGVtZW50OiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgYXBwZW5kX2NoaWxkOiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5wdHJdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgc2V0X2F0dHJpYnV0ZToge1xuICAgICAgYXJnczogW1xuICAgICAgICBGRklUeXBlLnB0cixcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIGFkZF9ldmVudF9saXN0ZW5lcjoge1xuICAgICAgYXJnczogW0ZGSVR5cGUucHRyLCBGRklUeXBlLmNzdHJpbmcsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIHJlbW92ZV9lbGVtZW50OiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZ10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfSxcbiAgICBzZXRfc3R5bGVzOiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIGdldF9hdHRyaWJ1dGU6IHtcbiAgICAgIGFyZ3M6IFtcbiAgICAgICAgRkZJVHlwZS5wdHIsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgIF0sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLmNzdHJpbmcsXG4gICAgfSxcbiAgICBpbnNlcnRfYmVmb3JlOiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBzeW1ib2xzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9DU3RyaW5nKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShbLi4ubmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0ciksIDBdKTtcbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxrQkFHRSxnQkFDQSxtQkFFQSxnQkNORixpQkFBUyxhQUFRLGdCQUVWLFNBQVMsQ0FBUyxDQUFDLEVBQWMsQ0FDdEMsTUFBUSxXQUFZLEVBQU8sRUFBTSxDQUMvQixXQUFZLENB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
