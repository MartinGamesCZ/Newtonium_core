// @bun
import{dlopen as g,FFIType as e}from"bun:ffi";function c(t){const{symbols:r}=g(t,{initialize:{args:[],returns:e.bool},run:{args:[],returns:e.void},create_window:{args:[e.cstring,e.cstring,e.cstring,e.function],returns:e.ptr},create_element:{args:[e.ptr,e.cstring,e.cstring,e.cstring],returns:e.void},append_child:{args:[e.ptr,e.cstring,e.ptr],returns:e.void},set_attribute:{args:[e.ptr,e.cstring,e.cstring,e.cstring,e.cstring],returns:e.void},add_event_listener:{args:[e.ptr,e.cstring,e.cstring,e.cstring],returns:e.void},remove_element:{args:[e.ptr,e.cstring],returns:e.void},set_styles:{args:[e.ptr,e.cstring,e.cstring],returns:e.void}});return r}function i(t){return new Uint8Array([...new TextEncoder().encode(t),0])}import{randomUUID as _}from"crypto";function s(){return _().replaceAll("-","")}function l(t,r){return`
    .iid_${t} {
      ${Object.entries(r).filter(([,o])=>typeof o==="string").map(([o,m])=>`${o}: ${m}`).join("; ")}
    }
  `.replace(/\n/g," ").replace(/[ ]{2,}/g," ").trim()}class d{tagName;iid;_window;constructor(t,r,n){this.tagName=t,this.iid=r,this._window=n}style={setProperty:(t,r)=>{this.style[t]=r,this._window.core.set_styles(this._window.getChannelPtr(),i(this.iid),i(l(this.iid,this.style)))}};appendChild(t){this._window.core.append_child(this._window.getChannelPtr(),i(this.iid),i(t.iid))}setAttribute(t,r){this._window.core.set_attribute(this._window.getChannelPtr(),i(this.iid),i(this.tagName),i(t),i(r))}addEventListener(t,r){const n=s();this._window.element_listeners[n]=r,this._window.core.add_event_listener(this._window.getChannelPtr(),i(this.iid),i(t),i(n))}remove(){this._window.core.remove_element(this._window.getChannelPtr(),i(this.iid)),this._window.document.deleteElement(this.iid)}}import w from"util";class a{_elements=new Map;_window;body;constructor(t){this._window=t,this.body=this._createElementWithId("view","body",!0)}createElement(t,r={}){const n=s();return this._createElementWithId(t,n,!1,r)}getElementById(t){return this._elements.get(t)?.element}_createElementWithId(t,r,n=!1,o={}){if(!n)this._window.core.create_element(this._window.getChannelPtr(),i(t),i(r),i(JSON.stringify(o)));const m=new d(t,r,this._window);return this._elements.set(r,{pointer:0,element:m}),m}deleteElement(t){this._elements.delete(t)}[w.inspect.custom](t,r){return`NewtoniumDocument {
  elements: ${this._elements.size}
}`}}import h from"path";class p{worker_path=h.join(import.meta.dirname,"../workers/runner");lib_path=h.join(import.meta.dirname,"../lib/libnewtonium"+(process.platform=="win32"?".dll":".so"));_worker;_id;_channel_ptr=-1;core=c(this.lib_path);title;icon;document;listeners={ready:[]};element_listeners={};constructor(t,r){this._worker=new Worker(this.worker_path),this._id=s(),this.title=t,this.icon=r,this.document=new a(this)}run(){this._worker.postMessage({lib_path:this.lib_path,id:this._id,title:this.title,icon:this.icon}),this._worker.onmessage=(t)=>{if(t.data.e==="close")this._worker.terminate();if(t.data.e==="ready")this._channel_ptr=t.data.channel_ptr,this._fireEvent("ready");if(t.data.e==="event"){const r=this.element_listeners[t.data.symbol_id];if(!r)return;r()}}}on(t,r){if(!this.listeners[t])this.listeners[t]=[];this.listeners[t].push(r)}_fireEvent(t,...r){for(let n of this.listeners[t])n(...r)}getChannelPtr(){if(this._channel_ptr===-1)throw new Error("Window is not ready yet");return this._channel_ptr}}export{p as Window,a as Document};

//# debugId=CB22BD24D6266BCE64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2ZmaS50cyIsICIuLi9zcmMvdXRpbHMvaWQudHMiLCAiLi4vc3JjL3V0aWxzL2Nzc190cmFuc2Zvcm1lci50cyIsICIuLi9zcmMvZG9tL2VsZW1lbnQudHMiLCAiLi4vc3JjL2RvbS9kb2N1bWVudC50cyIsICIuLi9zcmMvZG9tL3dpbmRvdy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICJpbXBvcnQgeyBkbG9wZW4sIEZGSVR5cGUgfSBmcm9tIFwiYnVuOmZmaVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRkZJKHBhdGg6IHN0cmluZykge1xuICBjb25zdCB7IHN5bWJvbHMgfSA9IGRsb3BlbihwYXRoLCB7XG4gICAgaW5pdGlhbGl6ZToge1xuICAgICAgYXJnczogW10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLmJvb2wsXG4gICAgfSxcbiAgICBydW46IHtcbiAgICAgIGFyZ3M6IFtdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgY3JlYXRlX3dpbmRvdzoge1xuICAgICAgYXJnczogW1xuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmZ1bmN0aW9uLFxuICAgICAgXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUucHRyLFxuICAgIH0sXG4gICAgY3JlYXRlX2VsZW1lbnQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmcsIEZGSVR5cGUuY3N0cmluZ10sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfSxcbiAgICBhcHBlbmRfY2hpbGQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLnB0cl0sXG4gICAgICByZXR1cm5zOiBGRklUeXBlLnZvaWQsXG4gICAgfSxcbiAgICBzZXRfYXR0cmlidXRlOiB7XG4gICAgICBhcmdzOiBbXG4gICAgICAgIEZGSVR5cGUucHRyLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICAgIEZGSVR5cGUuY3N0cmluZyxcbiAgICAgICAgRkZJVHlwZS5jc3RyaW5nLFxuICAgICAgICBGRklUeXBlLmNzdHJpbmcsXG4gICAgICBdLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgYWRkX2V2ZW50X2xpc3RlbmVyOiB7XG4gICAgICBhcmdzOiBbRkZJVHlwZS5wdHIsIEZGSVR5cGUuY3N0cmluZywgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gICAgcmVtb3ZlX2VsZW1lbnQ6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nXSxcbiAgICAgIHJldHVybnM6IEZGSVR5cGUudm9pZCxcbiAgICB9LFxuICAgIHNldF9zdHlsZXM6IHtcbiAgICAgIGFyZ3M6IFtGRklUeXBlLnB0ciwgRkZJVHlwZS5jc3RyaW5nLCBGRklUeXBlLmNzdHJpbmddLFxuICAgICAgcmV0dXJuczogRkZJVHlwZS52b2lkLFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBzeW1ib2xzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9DU3RyaW5nKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShbLi4ubmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0ciksIDBdKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUlkKCkge1xuICByZXR1cm4gcmFuZG9tVVVJRCgpLnJlcGxhY2VBbGwoXCItXCIsIFwiXCIpO1xufVxuIiwKICAgICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjc3NUcmFuc2Zvcm1lcihcbiAgaWQ6IHN0cmluZyxcbiAgc3R5bGVzOiB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICB9XG4pIHtcbiAgY29uc3Qgb3V0ID0gYFxuICAgIC5paWRfJHtpZH0ge1xuICAgICAgJHtPYmplY3QuZW50cmllcyhzdHlsZXMpXG4gICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9OiAke3ZhbHVlfWApXG4gICAgICAgIC5qb2luKFwiOyBcIil9XG4gICAgfVxuICBgXG4gICAgLnJlcGxhY2UoL1xcbi9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvWyBdezIsfS9nLCBcIiBcIilcbiAgICAudHJpbSgpO1xuXG4gIHJldHVybiBvdXQ7XG59XG4iLAogICAgImltcG9ydCB7IEZGSVR5cGUsIEpTQ2FsbGJhY2ssIHR5cGUgUG9pbnRlciB9IGZyb20gXCJidW46ZmZpXCI7XG5pbXBvcnQgdHlwZSBXaW5kb3cgZnJvbSBcIi4vd2luZG93XCI7XG5pbXBvcnQgeyB0b0NTdHJpbmcgfSBmcm9tIFwiLi4vZmZpXCI7XG5pbXBvcnQgeyByYW5kb21JZCB9IGZyb20gXCIuLi91dGlscy9pZFwiO1xuaW1wb3J0IGNzc1RyYW5zZm9ybWVyIGZyb20gXCIuLi91dGlscy9jc3NfdHJhbnNmb3JtZXJcIjtcblxuZXhwb3J0IHR5cGUgRWxlbWVudFRhZyA9IFwidmlld1wiIHwgXCJ0ZXh0XCIgfCBcImJ1dHRvblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbGVtZW50IHtcbiAgdGFnTmFtZTogRWxlbWVudFRhZztcbiAgaWlkOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3c7XG5cbiAgY29uc3RydWN0b3IodGFnOiBFbGVtZW50VGFnLCBpaWQ6IHN0cmluZywgX3dpbmRvdzogV2luZG93KSB7XG4gICAgdGhpcy50YWdOYW1lID0gdGFnO1xuICAgIHRoaXMuaWlkID0gaWlkO1xuXG4gICAgdGhpcy5fd2luZG93ID0gX3dpbmRvdztcbiAgfVxuXG4gIHN0eWxlOiB7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIHNldFByb3BlcnR5OiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIH0gPSB7XG4gICAgc2V0UHJvcGVydHk6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5zdHlsZVtrZXldID0gdmFsdWU7XG5cbiAgICAgIHRoaXMuX3dpbmRvdy5jb3JlLnNldF9zdHlsZXMoXG4gICAgICAgIHRoaXMuX3dpbmRvdy5nZXRDaGFubmVsUHRyKCkgYXMgUG9pbnRlcixcbiAgICAgICAgdG9DU3RyaW5nKHRoaXMuaWlkKSxcbiAgICAgICAgdG9DU3RyaW5nKGNzc1RyYW5zZm9ybWVyKHRoaXMuaWlkLCB0aGlzLnN0eWxlKSlcbiAgICAgICk7XG4gICAgfSxcbiAgfTtcblxuICBhcHBlbmRDaGlsZChjaGlsZDogRWxlbWVudCkge1xuICAgIHRoaXMuX3dpbmRvdy5jb3JlLmFwcGVuZF9jaGlsZChcbiAgICAgIHRoaXMuX3dpbmRvdy5nZXRDaGFubmVsUHRyKCkgYXMgUG9pbnRlcixcbiAgICAgIHRvQ1N0cmluZyh0aGlzLmlpZCksXG4gICAgICB0b0NTdHJpbmcoY2hpbGQuaWlkKVxuICAgICk7XG4gIH1cblxuICBzZXRBdHRyaWJ1dGUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl93aW5kb3cuY29yZS5zZXRfYXR0cmlidXRlKFxuICAgICAgdGhpcy5fd2luZG93LmdldENoYW5uZWxQdHIoKSBhcyBQb2ludGVyLFxuICAgICAgdG9DU3RyaW5nKHRoaXMuaWlkKSxcbiAgICAgIHRvQ1N0cmluZyh0aGlzLnRhZ05hbWUpLFxuICAgICAgdG9DU3RyaW5nKGtleSksXG4gICAgICB0b0NTdHJpbmcodmFsdWUpXG4gICAgKTtcbiAgfVxuXG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6ICgpID0+IHZvaWQpIHtcbiAgICBjb25zdCBzeW1ib2xfaWQgPSByYW5kb21JZCgpO1xuXG4gICAgdGhpcy5fd2luZG93LmVsZW1lbnRfbGlzdGVuZXJzW3N5bWJvbF9pZF0gPSBsaXN0ZW5lcjtcblxuICAgIHRoaXMuX3dpbmRvdy5jb3JlLmFkZF9ldmVudF9saXN0ZW5lcihcbiAgICAgIHRoaXMuX3dpbmRvdy5nZXRDaGFubmVsUHRyKCkgYXMgUG9pbnRlcixcbiAgICAgIHRvQ1N0cmluZyh0aGlzLmlpZCksXG4gICAgICB0b0NTdHJpbmcoZXZlbnQpLFxuICAgICAgdG9DU3RyaW5nKHN5bWJvbF9pZClcbiAgICApO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMuX3dpbmRvdy5jb3JlLnJlbW92ZV9lbGVtZW50KFxuICAgICAgdGhpcy5fd2luZG93LmdldENoYW5uZWxQdHIoKSBhcyBQb2ludGVyLFxuICAgICAgdG9DU3RyaW5nKHRoaXMuaWlkKVxuICAgICk7XG5cbiAgICB0aGlzLl93aW5kb3cuZG9jdW1lbnQuZGVsZXRlRWxlbWVudCh0aGlzLmlpZCk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCBFbGVtZW50LCB7IHR5cGUgRWxlbWVudFRhZyB9IGZyb20gXCIuL2VsZW1lbnRcIjtcbmltcG9ydCB7IHJhbmRvbUlkIH0gZnJvbSBcIi4uL3V0aWxzL2lkXCI7XG5pbXBvcnQgdXRpbCBmcm9tIFwidXRpbFwiO1xuaW1wb3J0IHR5cGUgV2luZG93IGZyb20gXCIuL3dpbmRvd1wiO1xuaW1wb3J0IHsgdG9DU3RyaW5nIH0gZnJvbSBcIi4uL2ZmaVwiO1xuaW1wb3J0IHR5cGUgeyBQb2ludGVyIH0gZnJvbSBcImJ1bjpmZmlcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9jdW1lbnQge1xuICBwcml2YXRlIF9lbGVtZW50czogTWFwPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICBwb2ludGVyOiBudW1iZXI7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgIH1cbiAgPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3c7XG5cbiAgYm9keTogRWxlbWVudDtcblxuICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdykge1xuICAgIHRoaXMuX3dpbmRvdyA9IHdpbmRvdztcblxuICAgIHRoaXMuYm9keSA9IHRoaXMuX2NyZWF0ZUVsZW1lbnRXaXRoSWQoXCJ2aWV3XCIsIFwiYm9keVwiLCB0cnVlKTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQodGFnOiBFbGVtZW50VGFnLCBhcmdzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge30pIHtcbiAgICBjb25zdCBpaWQgPSByYW5kb21JZCgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVsZW1lbnRXaXRoSWQodGFnLCBpaWQsIGZhbHNlLCBhcmdzKTtcbiAgfVxuXG4gIGdldEVsZW1lbnRCeUlkKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudHMuZ2V0KGlkKT8uZWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUVsZW1lbnRXaXRoSWQoXG4gICAgdGFnOiBFbGVtZW50VGFnLFxuICAgIGlpZDogc3RyaW5nLFxuICAgIHNraXBDcmVhdGUgPSBmYWxzZSxcbiAgICBhcmdzOiB7XG4gICAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghc2tpcENyZWF0ZSlcbiAgICAgIHRoaXMuX3dpbmRvdy5jb3JlLmNyZWF0ZV9lbGVtZW50KFxuICAgICAgICB0aGlzLl93aW5kb3cuZ2V0Q2hhbm5lbFB0cigpIGFzIFBvaW50ZXIsXG4gICAgICAgIHRvQ1N0cmluZyh0YWcpLFxuICAgICAgICB0b0NTdHJpbmcoaWlkKSxcbiAgICAgICAgdG9DU3RyaW5nKEpTT04uc3RyaW5naWZ5KGFyZ3MpKVxuICAgICAgKTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBuZXcgRWxlbWVudCh0YWcsIGlpZCwgdGhpcy5fd2luZG93KTtcblxuICAgIHRoaXMuX2VsZW1lbnRzLnNldChpaWQsIHtcbiAgICAgIHBvaW50ZXI6IDAsXG4gICAgICBlbGVtZW50LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBkZWxldGVFbGVtZW50KGlpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5fZWxlbWVudHMuZGVsZXRlKGlpZCk7XG4gIH1cblxuICBbdXRpbC5pbnNwZWN0LmN1c3RvbV0oX2RlcHRoOiBudW1iZXIsIF9vcHRpb25zOiBhbnkpIHtcbiAgICByZXR1cm4gYE5ld3Rvbml1bURvY3VtZW50IHtcbiAgZWxlbWVudHM6ICR7dGhpcy5fZWxlbWVudHMuc2l6ZX1cbn1gO1xuICB9XG59XG4iLAogICAgImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcIi4vZG9jdW1lbnRcIjtcbmltcG9ydCB7IHJhbmRvbUlkIH0gZnJvbSBcIi4uL3V0aWxzL2lkXCI7XG5pbXBvcnQgeyBjcmVhdGVGRkkgfSBmcm9tIFwiLi4vZmZpXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpbmRvdyB7XG4gIHdvcmtlcl9wYXRoOiBzdHJpbmcgPSBwYXRoLmpvaW4oaW1wb3J0Lm1ldGEuZGlybmFtZSwgXCIuLi93b3JrZXJzL3J1bm5lclwiKTtcbiAgbGliX3BhdGg6IHN0cmluZyA9IHBhdGguam9pbihcbiAgICBpbXBvcnQubWV0YS5kaXJuYW1lLFxuICAgIFwiLi4vbGliL2xpYm5ld3Rvbml1bVwiICsgKHByb2Nlc3MucGxhdGZvcm0gPT0gXCJ3aW4zMlwiID8gXCIuZGxsXCIgOiBcIi5zb1wiKVxuICApO1xuXG4gIHByaXZhdGUgX3dvcmtlcjogV29ya2VyO1xuICBwcml2YXRlIF9pZDogc3RyaW5nO1xuICBwcml2YXRlIF9jaGFubmVsX3B0cjogbnVtYmVyID0gLTE7XG4gIGNvcmUgPSBjcmVhdGVGRkkodGhpcy5saWJfcGF0aCk7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgZG9jdW1lbnQ6IERvY3VtZW50O1xuXG4gIGxpc3RlbmVyczoge1xuICAgIFtrZXk6IHN0cmluZ106IEZ1bmN0aW9uW107XG4gIH0gPSB7XG4gICAgcmVhZHk6IFtdLFxuICB9O1xuXG4gIGVsZW1lbnRfbGlzdGVuZXJzOiB7XG4gICAgW2tleTogc3RyaW5nXTogRnVuY3Rpb247XG4gIH0gPSB7fTtcblxuICBjb25zdHJ1Y3Rvcih0aXRsZTogc3RyaW5nLCBpY29uOiBzdHJpbmcpIHtcbiAgICB0aGlzLl93b3JrZXIgPSBuZXcgV29ya2VyKHRoaXMud29ya2VyX3BhdGgpO1xuICAgIHRoaXMuX2lkID0gcmFuZG9tSWQoKTtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5pY29uID0gaWNvbjtcbiAgICB0aGlzLmRvY3VtZW50ID0gbmV3IERvY3VtZW50KHRoaXMpO1xuICB9XG5cbiAgcnVuKCkge1xuICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICBsaWJfcGF0aDogdGhpcy5saWJfcGF0aCxcbiAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgaWNvbjogdGhpcy5pY29uLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fd29ya2VyLm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5kYXRhLmUgPT09IFwiY2xvc2VcIikgdGhpcy5fd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgaWYgKGUuZGF0YS5lID09PSBcInJlYWR5XCIpIHtcbiAgICAgICAgdGhpcy5fY2hhbm5lbF9wdHIgPSBlLmRhdGEuY2hhbm5lbF9wdHI7XG4gICAgICAgIHRoaXMuX2ZpcmVFdmVudChcInJlYWR5XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGUuZGF0YS5lID09PSBcImV2ZW50XCIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSB0aGlzLmVsZW1lbnRfbGlzdGVuZXJzW2UuZGF0YS5zeW1ib2xfaWRdO1xuXG4gICAgICAgIGlmICghbGlzdGVuZXIpIHJldHVybjtcblxuICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBvbihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pIHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50XSkgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gW107XG5cbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBwcml2YXRlIF9maXJlRXZlbnQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2hhbm5lbFB0cigpIHtcbiAgICBpZiAodGhpcy5fY2hhbm5lbF9wdHIgPT09IC0xKSB0aHJvdyBuZXcgRXJyb3IoXCJXaW5kb3cgaXMgbm90IHJlYWR5IHlldFwiKTtcblxuICAgIHJldHVybiB0aGlzLl9jaGFubmVsX3B0cjtcbiAgfVxufVxuIgogIF0sCiAgIm1hcHBpbmdzIjogIjtBQUFBLGlCQUFTLGFBQVEsZ0JBRVYsU0FBUyxDQUFTLENBQUMsRUFBYyxDQUN0QyxNQUFRLFdBQVksRUFBTyxFQUFNLENBQy9CLFdBQVksQ0FDVixLQUFNLENBQUMsRUFDUCxRQUFTLEVBQVEsSUFDbkIsRUFDQSxJQUFLLENBQ0gsS0FBTSxDQUFDLEVBQ1AsUUFBUyxFQUFRLElBQ25CLEVBQ0EsY0FBZSxDQUNiLEtBQU0sQ0FDSixFQUFRLFFBQ1IsRUFBUSxRQUNSLEVBQVEsUUFDUixFQUFRLFFBQ1YsRUFDQSxRQUFTLEVBQVEsR0FDbkIsRUFDQSxlQUFnQixDQUNkLEtBQU0sQ0FBQyxFQUFRLElBQUssRUFBUSxRQUFTLEVBQVEsUUFBUyxFQUFRLE9BQU8sRUFDckUsUUFBUyxFQUFRLElBQ25CLEVBQ0EsYUFBYyxDQUNaLEtBQU0sQ0FBQyxFQUFRLElBQUssRUFBUSxRQUFTLEVBQVEsR0FBRyxFQUNoRCxRQUFTLEVBQVEsSUFDbkIsRUFDQSxjQUFlLENBQ2IsS0FBTSxDQUNKLEVBQVEsSUFDUixFQUFRLFFBQ1IsRUFBUSxRQUNSLEVBQVEsUUFDUixFQUFRLE9BQ1YsRUFDQSxRQUFTLEVBQVEsSUFDbkIsRUFDQSxtQkFBb0IsQ0FDbEIsS0FBTSxDQUFDLEVBQVEsSUFBSyxFQUFRLFFBQVMsRUFBUSxRQUFTLEVBQVEsT0FBTyxFQUNyRSxRQUFTLEVBQVEsSUFDbkIsRUFDQSxlQUFnQixDQUNkLEtBQU0sQ0FBQyxFQUFRLElBQUssRUFBUSxPQUFPLEVBQ25DLFFBQVMsRUFBUSxJQUNuQixFQUNBLFdBQVksQ0FDVixLQUFNLENBQUMsRUFBUSxJQUFLLEVBQVEsUUFBUyxFQUFRLE9BQU8sRUFDcEQsUUFBUyxFQUFRLElBQ25CLENBQ0YsQ0FBQyxFQUVELE9BQU8sRUFHRixTQUFTLENBQVMsQ0FBQyxFQUFhLENBQ3JDLE9BQU8sSUFBSSxXQUFXLENBQUMsR0FBRyxJQUFJLFlBQVksRUFBRSxPQUFPLENBQUcsRUFBRyxDQUFDLENBQUMsRUN6RDdELHFCQUFTLGVBRUYsU0FBUyxDQUFRLEVBQUcsQ0FDekIsT0FBTyxFQUFXLEVBQUUsV0FBVyxJQUFLLEVBQUUsRUNIeEMsU0FBd0IsQ0FBYyxDQUNwQyxFQUNBLEVBR0EsQ0FhQSxNQVpZO0FBQUEsV0FDSDtBQUFBLFFBQ0gsT0FBTyxRQUFRLENBQU0sRUFDcEIsT0FBTyxHQUFJLFlBQWMsSUFBTSxRQUFRLEVBQ3ZDLElBQUksRUFBRSxFQUFLLEtBQVcsR0FBRyxNQUFRLEdBQU8sRUFDeEMsS0FBSyxJQUFJO0FBQUE7QUFBQSxJQUdiLFFBQVEsTUFBTyxHQUFHLEVBQ2xCLFFBQVEsV0FBWSxHQUFHLEVBQ3ZCLEtBQUssRUNSVixNQUFxQixDQUFRLENBQzNCLFFBQ0EsSUFFUSxRQUVSLFdBQVcsQ0FBQyxFQUFpQixFQUFhLEVBQWlCLENBQ3pELEtBQUssUUFBVSxFQUNmLEtBQUssSUFBTSxFQUVYLEtBQUssUUFBVSxFQUdqQixNQUdJLENBQ0YsWUFBYSxDQUFDLEVBQWEsSUFBa0IsQ0FDM0MsS0FBSyxNQUFNLEdBQU8sRUFFbEIsS0FBSyxRQUFRLEtBQUssV0FDaEIsS0FBSyxRQUFRLGNBQWMsRUFDM0IsRUFBVSxLQUFLLEdBQUcsRUFDbEIsRUFBVSxFQUFlLEtBQUssSUFBSyxLQUFLLEtBQUssQ0FBQyxDQUNoRCxFQUVKLEVBRUEsV0FBVyxDQUFDLEVBQWdCLENBQzFCLEtBQUssUUFBUSxLQUFLLGFBQ2hCLEtBQUssUUFBUSxjQUFjLEVBQzNCLEVBQVUsS0FBSyxHQUFHLEVBQ2xCLEVBQVUsRUFBTSxHQUFHLENBQ3JCLEVBR0YsWUFBWSxDQUFDLEVBQWEsRUFBZSxDQUN2QyxLQUFLLFFBQVEsS0FBSyxjQUNoQixLQUFLLFFBQVEsY0FBYyxFQUMzQixFQUFVLEtBQUssR0FBRyxFQUNsQixFQUFVLEtBQUssT0FBTyxFQUN0QixFQUFVLENBQUcsRUFDYixFQUFVLENBQUssQ0FDakIsRUFHRixnQkFBZ0IsQ0FBQyxFQUFlLEVBQXNCLENBQ3BELE1BQU0sRUFBWSxFQUFTLEVBRTNCLEtBQUssUUFBUSxrQkFBa0IsR0FBYSxFQUU1QyxLQUFLLFFBQVEsS0FBSyxtQkFDaEIsS0FBSyxRQUFRLGNBQWMsRUFDM0IsRUFBVSxLQUFLLEdBQUcsRUFDbEIsRUFBVSxDQUFLLEVBQ2YsRUFBVSxDQUFTLENBQ3JCLEVBR0YsTUFBTSxFQUFHLENBQ1AsS0FBSyxRQUFRLEtBQUssZUFDaEIsS0FBSyxRQUFRLGNBQWMsRUFDM0IsRUFBVSxLQUFLLEdBQUcsQ0FDcEIsRUFFQSxLQUFLLFFBQVEsU0FBUyxjQUFjLEtBQUssR0FBRyxFQUVoRCxDQ3hFQSxvQkFLQSxNQUFxQixDQUFTLENBQ3BCLFVBTUosSUFBSSxJQUNBLFFBRVIsS0FFQSxXQUFXLENBQUMsRUFBZ0IsQ0FDMUIsS0FBSyxRQUFVLEVBRWYsS0FBSyxLQUFPLEtBQUsscUJBQXFCLE9BQVEsT0FBUSxFQUFJLEVBRzVELGFBQWEsQ0FBQyxFQUFpQixFQUErQixDQUFDLEVBQUcsQ0FDaEUsTUFBTSxFQUFNLEVBQVMsRUFFckIsT0FBTyxLQUFLLHFCQUFxQixFQUFLLEVBQUssR0FBTyxDQUFJLEVBR3hELGNBQWMsQ0FBQyxFQUFZLENBQ3pCLE9BQU8sS0FBSyxVQUFVLElBQUksQ0FBRSxHQUFHLFFBR3pCLG9CQUFvQixDQUMxQixFQUNBLEVBQ0EsRUFBYSxHQUNiLEVBRUksQ0FBQyxFQUNMLENBQ0EsSUFBSyxFQUNILEtBQUssUUFBUSxLQUFLLGVBQ2hCLEtBQUssUUFBUSxjQUFjLEVBQzNCLEVBQVUsQ0FBRyxFQUNiLEVBQVUsQ0FBRyxFQUNiLEVBQVUsS0FBSyxVQUFVLENBQUksQ0FBQyxDQUNoQyxFQUVGLE1BQU0sRUFBVSxJQUFJLEVBQVEsRUFBSyxFQUFLLEtBQUssT0FBTyxFQU9sRCxPQUxBLEtBQUssVUFBVSxJQUFJLEVBQUssQ0FDdEIsUUFBUyxFQUNULFNBQ0YsQ0FBQyxFQUVNLEVBR1QsYUFBYSxDQUFDLEVBQWEsQ0FDekIsS0FBSyxVQUFVLE9BQU8sQ0FBRyxHQUcxQixFQUFLLFFBQVEsT0FBTyxDQUFDLEVBQWdCLEVBQWUsQ0FDbkQsTUFBTztBQUFBLGNBQ0csS0FBSyxVQUFVO0FBQUEsR0FHN0IsQ0N2RUEsb0JBS0EsTUFBcUIsQ0FBTyxDQUMxQixZQUFzQixFQUFLLEtBQUssWUFBWSxRQUFTLG1CQUFtQixFQUN4RSxTQUFtQixFQUFLLEtBQ3RCLFlBQVksUUFDWix1QkFBeUIsUUFBUSxVQUFZLFFBQVUsT0FBUyxNQUNsRSxFQUVRLFFBQ0EsSUFDQSxhQUF1QixHQUMvQixLQUFPLEVBQVUsS0FBSyxRQUFRLEVBQzlCLE1BQ0EsS0FDQSxTQUVBLFVBRUksQ0FDRixNQUFPLENBQUMsQ0FDVixFQUVBLGtCQUVJLENBQUMsRUFFTCxXQUFXLENBQUMsRUFBZSxFQUFjLENBQ3ZDLEtBQUssUUFBVSxJQUFJLE9BQU8sS0FBSyxXQUFXLEVBQzFDLEtBQUssSUFBTSxFQUFTLEVBQ3BCLEtBQUssTUFBUSxFQUNiLEtBQUssS0FBTyxFQUNaLEtBQUssU0FBVyxJQUFJLEVBQVMsSUFBSSxFQUduQyxHQUFHLEVBQUcsQ0FDSixLQUFLLFFBQVEsWUFBWSxDQUN2QixTQUFVLEtBQUssU0FDZixHQUFJLEtBQUssSUFDVCxNQUFPLEtBQUssTUFDWixLQUFNLEtBQUssSUFDYixDQUFDLEVBRUQsS0FBSyxRQUFRLFVBQVksQ0FBQyxJQUFNLENBQzlCLEdBQUksRUFBRSxLQUFLLElBQU0sUUFBUyxLQUFLLFFBQVEsVUFBVSxFQUNqRCxHQUFJLEVBQUUsS0FBSyxJQUFNLFFBQ2YsS0FBSyxhQUFlLEVBQUUsS0FBSyxZQUMzQixLQUFLLFdBQVcsT0FBTyxFQUV6QixHQUFJLEVBQUUsS0FBSyxJQUFNLFFBQVMsQ0FDeEIsTUFBTSxFQUFXLEtBQUssa0JBQWtCLEVBQUUsS0FBSyxXQUUvQyxJQUFLLEVBQVUsT0FFZixFQUFTLElBS2YsRUFBRSxDQUFDLEVBQWUsRUFBb0IsQ0FDcEMsSUFBSyxLQUFLLFVBQVUsR0FBUSxLQUFLLFVBQVUsR0FBUyxDQUFDLEVBRXJELEtBQUssVUFBVSxHQUFPLEtBQUssQ0FBUSxFQUc3QixVQUFVLENBQUMsS0FBa0IsRUFBYSxDQUNoRCxRQUFXLEtBQVksS0FBSyxVQUFVLEdBQ3BDLEVBQVMsR0FBRyxDQUFJLEVBSXBCLGFBQWEsRUFBRyxDQUNkLEdBQUksS0FBSyxlQUFpQixHQUFJLE1BQU0sSUFBSSxNQUFNLHlCQUF5QixFQUV2RSxPQUFPLEtBQUssYUFFaEIiLAogICJkZWJ1Z0lkIjogIkNCMjJCRDI0RDYyNjZCQ0U2NDc1NkUyMTY0NzU2RTIxIiwKICAibmFtZXMiOiBbXQp9
